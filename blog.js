
(function(window,document){"use strict";var data_storage;var last_key;var env_urls=skGetEnvironmentUrls('medium-publication-feed');var app_url=env_urls.app_url;var app_backend_url=env_urls.app_backend_url;var sk_api_url=env_urls.sk_api_url;var app_file_server_url=env_urls.app_file_server_url;var sk_img_url=env_urls.sk_img_url;var sk_app_url=env_urls.sk_app_url;var sk_api_url=env_urls.sk_api_url;var data_link="";var original_data;var $grid;var bio;var el=document.getElementsByClassName('sk-ww-medium-publication-feed')[0];el.innerHTML="<div class='first_loading_animation' style='text-align:center; width:100%;'><img src='"+app_url+"images/ripple.svg' class='loading-img' style='width:auto !important;' /></div>";loadCssFile(app_url+"libs/js/magnific-popup/magnific-popup.css");loadCssFile("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css");if(window.jQuery===undefined){var script_tag=document.createElement('script');script_tag.setAttribute("type","text/javascript");script_tag.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js");(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(script_tag);document.documentElement.appendChild(script_tag);if(script_tag.readyState){script_tag.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){scriptLoadHandler();}};}else{script_tag.onload=scriptLoadHandler;}}else{jQuery=window.jQuery;scriptLoadHandler();}
function loadScript(url,callback){var scriptTag=document.createElement('script');scriptTag.setAttribute("type","text/javascript");scriptTag.setAttribute("src",url);if(typeof callback!=="undefined"){if(scriptTag.readyState){scriptTag.onreadystatechange=function(){if(this.readyState==='complete'||this.readyState==='loaded'){callback();}};}else{scriptTag.onload=callback;}}
(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(scriptTag);}
function scriptLoadHandler(){loadScript(app_url+"libs/js/magnific-popup/jquery.magnific-popup.js",function(){loadScript("https://unpkg.com/masonry-layout@4.2.0/dist/masonry.pkgd.min.js",function(){loadScript(app_url+"libs/js/swiper/swiper.min.js",function(){$=jQuery=window.jQuery.noConflict(true);initializePlugin();});});});}
function loadCssFile(filename){var fileref=document.createElement("link");fileref.setAttribute("rel","stylesheet");fileref.setAttribute("type","text/css");fileref.setAttribute("href",filename);if(typeof fileref!="undefined"){document.getElementsByTagName("head")[0].appendChild(fileref)}}
function initializePlugin(){$=jQuery=window.jQuery.noConflict(true);initManificPopupPlugin(jQuery);jQuery.loadScript=function(url,callback){jQuery.ajax({url:url,dataType:'script',success:callback,async:true});}
if(typeof someObject=='undefined')jQuery.loadScript(app_url+"libs/tingle/tingle.js",function(){});main();}function orderPostItem(sk_medium_publication_feed,posts){posts.sort(function(a,b){if(getDsmSetting(sk_medium_publication_feed,"order_by")==0){return a.index-b.index;}
else if(getDsmSetting(sk_medium_publication_feed,"order_by")==1){return b.index-a.index;}});return posts;}
function getDsmEmbedId(sk_medium_publication_feed){var embed_id=sk_medium_publication_feed.attr('embed-id');if(embed_id==undefined){embed_id=sk_medium_publication_feed.attr('data-embed-id');}
return embed_id;}
function getDsmSetting(sk_medium_publication_feed,key){return sk_medium_publication_feed.find("."+key).text();}
function convertToLink(text){var words=text.split(' ');for(var i=0;i<words.length;i++){if(words[i].indexOf("www.")>=0){var link="<a href='https://"+words[i]+"' target='_blank'>"+words[i]+"</a>";text=text.replace(words[i],link);}}
return text;}
function changeImageResolution(sk_medium_publication_feed,data){var new_posts_list=[];if(data&&data.length>0){for(let item of data){if(item){var image=item.content;if(image){var regex=/<img.*?src='(.*?)'/;var src=regex.exec(image);if(src){src=regex.exec(image)[1];var src_split=src.split('/');var image_size=src_split[4];if(parseInt(image_size)){var new_image=src.replace(image_size,'1000');item.content=item.content.replace(src,new_image);var regex=/<img.*?src='(.*?)'/;var src=regex.exec(item.content)[1];}}}
new_posts_list.push(item);}}}
return new_posts_list;}
function moderationTabFeature(sk_medium_publication_feed,setting_turnon_preapproval_posts,posts){var preapproved_posts="do_not_show_anything";var excluded_posts="";var exclude_users="";if(setting_turnon_preapproval_posts==1){preapproved_posts=getSkSetting(sk_medium_publication_feed,"preapproved_posts");}
if(getSkSetting(sk_medium_publication_feed,"excluded_posts")!=""){excluded_posts=getSkSetting(sk_medium_publication_feed,"excluded_posts");}
var new_posts_list=[];if(posts&&posts.length>0){for(let item of posts){if(typeof item!='undefined'){if(setting_turnon_preapproval_posts==1){if(preapproved_posts.indexOf(item.id)!=-1){new_posts_list.push(item);}}
else{if(setting_turnon_preapproval_posts==0&&excluded_posts.indexOf(item.id.toString())!=-1&&item.id!=""){}
else{new_posts_list.push(item);}}}}}
return new_posts_list;}
function getScrollbarWidth(){const outer=document.createElement('div');outer.style.visibility='hidden';outer.style.overflow='scroll';outer.style.msOverflowStyle='scrollbar';document.body.appendChild(outer);const inner=document.createElement('div');outer.appendChild(inner);const scrollbarWidth=(outer.offsetWidth-inner.offsetWidth);outer.parentNode.removeChild(outer);return scrollbarWidth;}function applyMasonry(){$grid=new Masonry('.grid-medium-publication-feed',{itemSelector:'.grid-item-medium-publication-feed',columnWidth:'.grid-sizer-medium-publication-feed',percentPosition:true,transitionDuration:0});}
function fixMasonry(){setTimeout(function(){applyMasonry();},300);setTimeout(function(){applyMasonry();},500);setTimeout(function(){applyMasonry();},800);setTimeout(function(){applyMasonry();},1000);setTimeout(function(){applyMasonry();},2000);setTimeout(function(){applyMasonry();},3000);setTimeout(function(){applyMasonry();},4000);setTimeout(function(){applyMasonry();},5000);setTimeout(function(){applyMasonry();},6000);}function loadBioInformation(sk_medium_publication_feed,data){var data_channel=data.channel;var hosted_by=getSkSetting(sk_medium_publication_feed,"hosted_by_text");data_channel=hosted_by&&hosted_by!="Stories by"?hosted_by:data_channel;var post_items="<div class='medium-publication-feed-root-container'>";post_items+="<div class='sk-medium-publication-feed-profile-info'>";if(getDsmSetting(sk_medium_publication_feed,"show_profile_name")==1){post_items+="<div class='sk-medium-publication-feed-name'>";post_items+="<a class='sk_feed_name_link' href='"+data.link+"' target='_blank'>"+data_channel+"</a>";post_items+="</div>";}
if(getDsmSetting(sk_medium_publication_feed,"show_profile_description")==1){var dataDescription=convertToLink(data.description);post_items+="<div class='sk-medium-publication-feed-profile-description'>";post_items+=dataDescription+" ";post_items+="</div>";}
post_items+="</div>";post_items+="</div>";return post_items;}
function loadFeed(sk_medium_publication_feed){var data=original_data;var embed_id=getDsmEmbedId(sk_medium_publication_feed);if(data.user_info.show_feed==false){sk_medium_publication_feed.prepend(data.user_info.message);sk_medium_publication_feed.find('.loading-img').hide();sk_medium_publication_feed.find('.first_loading_animation').hide();sk_medium_publication_feed.find('.sk_fb_events_options').hide();return;}
else{bio=data.bio;var post_items="";data_storage=data.item;if(data_storage){data_storage=orderPostItem(sk_medium_publication_feed,data_storage);}
var turnon_preapproval_posts=getSkSetting(sk_medium_publication_feed,"turnon_preapproval_posts");data_storage=moderationTabFeature(sk_medium_publication_feed,turnon_preapproval_posts,data_storage);data_storage=changeImageResolution(sk_medium_publication_feed,data_storage);data_link=data.link;if(getDsmSetting(sk_medium_publication_feed,"show_profile_name")==1||getDsmSetting(sk_medium_publication_feed,"show_profile_description")==1){post_items+=loadBioInformation(sk_medium_publication_feed,data);}
if(getDsmSetting(sk_medium_publication_feed,'layout')==3){post_items+=loadSliderLayout(sk_medium_publication_feed,data_storage);}
else{if(data_storage&&data_storage.length>0){post_items+="<div class='sk-medium-publication-feed-container'>";post_items+="<div class='grid-medium-publication-feed'>";post_items+="<div class='grid-sizer-medium-publication-feed'></div>";var enable_button=false;last_key=parseInt(getDsmSetting(sk_medium_publication_feed,'post_count'));for(var i=0;i<last_key;i++){if(typeof data_storage[i]!='undefined'){post_items+="<div class='medium_publication_feed_data'>";post_items+=getFeedItem(data_storage[i],sk_medium_publication_feed,data_link);post_items+="</div>";}}
if(data_storage.length>last_key){enable_button=true;}
post_items+="</div>";post_items+="</div>";if(enable_button&&getDsmSetting(sk_medium_publication_feed,"show_load_more_button")==1){post_items+="<div class='sk-medium-feed-bottom-btn-container'>";post_items+="<button class='sk-medium-publication-feed-load-more-posts'>";post_items+="Load more";post_items+="</button>";post_items+="<div>";}}
else{post_items+="<p class='sk-text-center'>No posts found. Please check moderation settings</p>";}}
post_items+=skGetBranding(sk_medium_publication_feed,data.user_info);sk_medium_publication_feed.append(post_items);applyCustomUi(jQuery,sk_medium_publication_feed);if(getDsmSetting(sk_medium_publication_feed,'layout')==3){skLayoutSliderSetting(sk_medium_publication_feed);skLayoutSliderArrowUI(sk_medium_publication_feed);}
sk_increaseView(data.user_info);}}
function getFeedItem(val,sk_medium_publication_feed,publication_link){var post_items="";var img_ctr=1;var cover_photo="";val.content=val.content.replace("75/75","224/224");val.content=val.content.replace("112/112","224/224");val.content=val.content.replace("fit/c/224/224/1*","max/450/1*");val.content=val.content.replace("max/467/1*","max/934/1*");val.content=val.content.split(`href="/`).join(`href="https:\/\/medium.com\/`);jQuery(val.content).find('img').each(function(){var img_src=$(this).attr('src');if(img_ctr==1){cover_photo=img_src;var src_split=cover_photo.split('/');var image_size=src_split[4];if(!isNaN(image_size)){cover_photo=cover_photo.replace(image_size,'1000');}}
img_ctr++;});if(val.content.indexOf("<coverp>")!=-1){cover_photo=val.content.substring(val.content.indexOf("<coverp>")+8,val.content.indexOf("</coverp>"));val.content=val.content.substring(val.content.indexOf("</coverp>")+9);}
if(val.content.indexOf("<figure")!=-1){cover_photo=val.content.substring(val.content.indexOf("<figure")+8,val.content.indexOf("</figure>"));if(cover_photo.indexOf(' src="')!=-1){cover_photo=cover_photo.substring(cover_photo.indexOf(' src="')+6);}
else if(cover_photo.indexOf('role="presentation" src="')!=-1){cover_photo=cover_photo.substring(cover_photo.indexOf('role="presentation" src="')+25);}
else if(cover_photo.indexOf('loading="lazy" src="')!=-1){cover_photo=cover_photo.substring(cover_photo.indexOf('loading="lazy" src="')+20);}
else{cover_photo=cover_photo.substring(cover_photo.indexOf('loading="eager" src="')+21);}
if(cover_photo.indexOf('">')!=-1){cover_photo=cover_photo.substring(0,cover_photo.indexOf('">'));}}
if(!cover_photo&&val.content.indexOf("<img src='")!=-1){cover_photo=val.content.substring(val.content.indexOf("<img src='")+10);if(cover_photo.indexOf("'>")!=-1){cover_photo=cover_photo.substring(0,cover_photo.indexOf("'>"));}}
if(cover_photo&&cover_photo.indexOf("'/>")!=-1){cover_photo=cover_photo.replace("'/>","");}
if(cover_photo&&cover_photo.includes('fill:88:88/')){cover_photo="";}
if(cover_photo&&cover_photo.includes('fill:44:44/')){cover_photo="";}
if(val.thumbnail){cover_photo=val.thumbnail;cover_photo=cover_photo.replace("fill:224:224","fill:1000:1000");}
post_items+="<div class='grid-item-medium-publication-feed' data-link='"+val.link+"'>";post_items+="<div class='sk_medium_publication_feed_grid-content'>";post_items+="<div class='sk_medium_publication_content'>";if(getDsmSetting(sk_medium_publication_feed,"show_post_image")==1){if(typeof cover_photo!=='undefined'){post_items+=cover_photo!=""?"<img src='"+cover_photo+"' class='sk-post-image' />":"";}}
post_items+="<div class='medium_publication_content'>";if(getDsmSetting(sk_medium_publication_feed,"show_post_title")==1){post_items+="<div class='medium_publication_post_title'>"+val.title+"</div>";}
post_items+="<div class='sk_medium_publication_feed_whole_article sk_medium_publication_feed_white_pop_up mfp-hide'>";post_items+="<div class='popup-content-holder'>";post_items+="<h2>"+val.title+"</h2>";post_items+="<div>"+val.content+"</div>";if(val.claps||val.responses){post_items+="<div class='medium-feed-counts'>";if(val.claps&&parseInt(val.claps)>0){post_items+="<span><i class='fa fa-hand-paper-o' aria-hidden='true'></i> "+val.claps+"</span>";}
if(val.responses&&parseInt(val.responses)>0){post_items+="<span><i class='fa fa-comment-o' aria-hidden='true'></i> "+val.responses+"</span>";}
post_items+="<span style='float: right;' onclick=\"window.open('"+val.link+"/');\"><span style='font-family: FontAwesome !important;' aria-hidden='true'>&#xf23a;</span> View on Medium</span>";post_items+="</div>";}
else{post_items+="<div class='medium-feed-counts'>";post_items+="<span style='visibility:hidden;'><i class='fa fa-hand-paper-o' aria-hidden='true'></i> "+val.claps+"</span>";post_items+="<span style='float: right;' onclick=\"window.open('"+val.link+"/');\"><span style='font-family: FontAwesome !important;' aria-hidden='true'>&#xf23a;</span> View on Medium</span>";post_items+="</div>";}
post_items+="</div>";post_items+="</div>";post_items+="<div class='medium_publication_post_meta'>";if(getDsmSetting(sk_medium_publication_feed,"show_profile_username")==1||getDsmSetting(sk_medium_publication_feed,"show_post_date")==1){post_items+="<div class='medium_publication_post_creator'>";if(getDsmSetting(sk_medium_publication_feed,"show_profile_username")==1){post_items+="<a href='"+publication_link+"' class='sk_creator_link' target='_blank'>"+val.creator+"</a> â€¢ ";}
if(getDsmSetting(sk_medium_publication_feed,"show_post_date")==1){post_items+=val.updated;}
post_items+="</div>";}
if(getDsmSetting(sk_medium_publication_feed,"show_post_description")==1&&val.description){if(val.description.includes('<figure>'))
val.description=val.description.substring(0,val.description.indexOf("<figure>")+8);if(val.description.includes('img')){val.description=val.description.split('img').join('replaced');}
var description=val.description.split('pre>').join('div>');const truncate=(str,max,suffix)=>str.length<max?str:`${str.substr(0,str.substr(0,max-suffix.length).lastIndexOf(' '))}${suffix}`;description=truncate(description,219,'...');if(val.description&&val.description.indexOf(val.title)!=-1){val.description=val.description.substr(val.description.indexOf(val.title));}
val.description=val.description.split(`href="/`).join(`href="https:\/\/medium.com\/`);post_items+="<div class='sk-description'>"+val.description+"</div>";}
post_items+="</div>";if(getDsmSetting(sk_medium_publication_feed,'show_read_more_button')==1){post_items+="<button class='sk-read-more-btn' onclick=\"window.open('"+val.link+"/');\"><span style='font-family: FontAwesome !important;' aria-hidden='true'>&#xf23a;</span> Read more</button>";}
post_items+="</div>";post_items+="</div>";if(val.claps>0||val.responses>0){post_items+="<div class='medium-feed-counts'>";if(val.claps&&parseInt(val.claps)>0){post_items+="<span><i class='fa fa-hand-paper-o' aria-hidden='true'></i> "+val.claps+"</span>";}
if(val.claps&&parseInt(val.responses)>0){post_items+="<span><i class='fa fa-comment-o' aria-hidden='true'></i> "+val.responses+"</span>";}
post_items+="<span style='float: right;' onclick=\"window.open('"+val.link+"/');\"><span style='font-family: FontAwesome !important;' aria-hidden='true'>&#xf23a;</span></span>";post_items+="</div>";}
post_items+="</div>";post_items+="</div>";return post_items;}
function requestFeedData(sk_medium_publication_feed){var embed_id=getDsmEmbedId(sk_medium_publication_feed);var json_url=app_file_server_url+embed_id+".json?nocache="+(new Date()).getTime();jQuery.getJSON(json_url,function(data){original_data=data;loadFeed(sk_medium_publication_feed);}).fail(function(e){generateSolutionMessage(sk_medium_publication_feed,embed_id);});}
function skErrorMessage(){var unable_to_load_html="<div class='sk_error_message'>";unable_to_load_html+="<ul>";unable_to_load_html+="<li>Unable to load Medium Publication Feed.</li>";unable_to_load_html+="<li>Make sure you have at least one post.</li>";unable_to_load_html+="<li>Make sure your medium publication account exists.</li>";unable_to_load_html+="<li>Please <a href='https://www.sociablekit.com/support' target='_blank'>contact support</a> if you need help.</li>";unable_to_load_html+="</div>";return unable_to_load_html;}function showPopUp(jQuery,content_src,clicked_element,sk_medium_publication_feed){var clicked_element_pos=jQuery(clicked_element).offset().top;var relative_pos=clicked_element_pos-jQuery(window).scrollTop()-200;if(typeof jQuery.magnificPopup==="undefined")
initManificPopupPlugin(jQuery);jQuery.magnificPopup.open({items:{src:content_src},'type':'inline',callbacks:{open:function(){applyCustomUi(jQuery,sk_medium_publication_feed);jQuery('.sk_medium_publication_feed_white_pop_up').find('a').attr('target','_blank');},close:function(){}}});}
function hidePopUp(){if(jQuery.magnificPopup){jQuery.magnificPopup.close();}}function makeResponsive(jQuery,sk_medium_publication_feed){var sk_medium_publication_feed_width=sk_medium_publication_feed.width();var column_count=getDsmSetting(sk_medium_publication_feed,"column_count");var grid_sizer_item=100/parseInt(column_count);if(sk_medium_publication_feed_width<=320){grid_sizer_item=100;}
else if(sk_medium_publication_feed_width<=481){grid_sizer_item=100;}
else if(sk_medium_publication_feed_width<=641){grid_sizer_item=50;}
else if(sk_medium_publication_feed_width<=930){if(getDsmSetting(sk_medium_publication_feed,"column_count")==1){grid_sizer_item=100;}
else if(getDsmSetting(sk_medium_publication_feed,"column_count")==2){grid_sizer_item=50;}
else{grid_sizer_item=33.3}}
else{if(getDsmSetting(sk_medium_publication_feed,"column_count")==1){grid_sizer_item=100;}
else if(getDsmSetting(sk_medium_publication_feed,"column_count")==2){grid_sizer_item=50;}
else if(getDsmSetting(sk_medium_publication_feed,"column_count")==3){grid_sizer_item=33.3;}
else if(getDsmSetting(sk_medium_publication_feed,"column_count")==4){grid_sizer_item=25;}}
sk_medium_publication_feed.find(".grid-sizer-medium-publication-feed, .grid-item-medium-publication-feed").css({"width":grid_sizer_item+"%"});if(getDsmSetting(sk_medium_publication_feed,'layout')==1||getDsmSetting(sk_medium_publication_feed,'layout')==3){var post_item_height=480;if(getDsmSetting(sk_medium_publication_feed,'post_height')>0){post_item_height=getDsmSetting(sk_medium_publication_feed,'post_height');}
setTimeout(function(){sk_medium_publication_feed.find(".grid-item-medium-publication-feed").css({"height":post_item_height+"px"});sk_medium_publication_feed.find(".sk_medium_publication_feed_grid-content").css({"height":(post_item_height-15)+"px"});sk_medium_publication_feed.find(".sk_medium_publication_content").css({"height":'100%',});sk_medium_publication_feed.find(".medium_publication_post_title,.sk-post-image, .medium_publication_post_meta").css({"width":sk_medium_publication_feed.find(".sk_medium_publication_content").width()-5+"px"});if(jQuery(document).width()<520){sk_medium_publication_feed.find(".sk_medium_publication_content").css({"overflow-y":"auto","overflow-x":"hidden"});}
else{sk_medium_publication_feed.find(".sk_medium_publication_content").mouseover(function(){jQuery(this).css({"overflow-y":"auto","overflow-x":"hidden"});}).mouseout(function(){jQuery(this).css({"overflow-y":"hidden","overflow-x":"hidden"});});}},200);var counter=0;var imgs=sk_medium_publication_feed.find(".sk_medium_publication_content .sk-post-image");makeGrid(sk_medium_publication_feed);[].forEach.call(imgs,function(img,i){img.addEventListener('load',function(){counter++;if(counter-1==i){setTimeout(function(){makeGrid(sk_medium_publication_feed);},1000)}},false);});}
else{applyMasonry();fixMasonry();replaceTag(sk_medium_publication_feed,'h3','p');}}
function replaceTag(sk_medium_publication_feed,el,new_el){sk_medium_publication_feed.find('.sk-description '+el).each(function(){$(this).replaceWith("<"+new_el+" style='font-size:18px;'>"+$(this).html()+"</"+new_el+">");});}
function makeGrid(sk_medium_publication_feed){var item_content_containers=sk_medium_publication_feed.find(".sk_medium_publication_content");var max_height=0;item_content_containers.each(function(i,v){if(jQuery(v).height()>max_height){max_height=jQuery(v).height();}});item_content_containers.css({"height":max_height+"px","overflow":"hidden",});}
function loadSliderLayout(sk_medium_publication_feed,data){var column_count=getDsmSetting(sk_medium_publication_feed,'column_count');column_count=parseInt(column_count);if(jQuery(document).width()<480){column_count=1;}
else if(jQuery(document).width()<750){column_count=column_count>2?2:column_count;}
else if(jQuery(document).width()<750){column_count=column_count>2?2:column_count;}
else if(jQuery(document).width()<900){column_count=column_count>3?3:column_count;}
var post_items="";post_items+="<div class='swiper-container swiper-layout-slider'>";post_items+="<button type='button' class='swiper-button-next ' style='pointer-events: all;'>";post_items+="<i class='sk-arrow sk-arrow-right'></i>";post_items+="</button>";post_items+="<button type='button' class='swiper-button-prev' style='pointer-events: all;'>";post_items+="<i class='sk-arrow sk-arrow-left'></i>";post_items+="</button>";post_items+="<div class='swiper-wrapper'>";var last_index=0;var data_slider=data;var pages=Math.ceil(data_slider.length/column_count);for(var slide=1;slide<=pages;slide++){post_items+="<div class='swiper-slide' >";post_items+="<div class='grid-medium-publication-feed'>";post_items+="<div class='grid-sizer-medium-publication-feed'></div>";var slide_data=getPaginationResult(sk_medium_publication_feed,data_slider,slide,column_count);jQuery.each(slide_data,function(key,val){if(val){post_items+="<div class='medium_publication_feed_data'>";post_items+=getFeedItem(val,sk_medium_publication_feed,data_link);post_items+="</div>";}});post_items+="</div>";post_items+="</div>";}
post_items+="</div>";post_items+="</div>";return post_items;}
function getPaginationResult(sk_medium_publication_feed,feeds_data,page,column_count){var start=0;var end=parseInt(column_count);var multiplicand=page-1;var return_feeds_data=[];if(page!=1){start=multiplicand*end;end=start+end;}
if((end-1)>feeds_data.length){end=feeds_data.length;}
for(var i=start;i<end;i++){return_feeds_data.push(feeds_data[i]);}
return return_feeds_data;}
function skLayoutSliderSetting(sk_medium_publication_feed){var autoplay=false;var loop=false;if(getDsmSetting(sk_medium_publication_feed,"autoplay")==1){var delay=getDsmSetting(sk_medium_publication_feed,"delay")*1500;autoplay={delay:delay};loop=true;}
var swiper=new Swiper('.swiper-layout-slider.swiper-container',{loop:loop,autoplay:autoplay,navigation:{nextEl:'.swiper-button-next',prevEl:'.swiper-button-prev',},});}
function skLayoutSliderArrowHeight(sk_medium_publication_feed){var feed_height=sk_medium_publication_feed.find(".grid-item-medium-publication-feed").height();var feed_height_2=feed_height/2;sk_medium_publication_feed.find(".swiper-button-prev,.swiper-button-next").css({"top":feed_height_2+"px"});}
function hoverContent(sk_medium_publication_feed){sk_medium_publication_feed.find(".grid-medium-publication").find(".feeds-content").mouseover(function(){var container_height=jQuery(this).find(".sk-feeds-content-body").height();if(jQuery(this).height()<container_height){jQuery(this).css({"overflow-y":"auto"});}}).mouseout(function(){jQuery(this).css({"overflow-y":"hidden"});});jQuery(".mfp-content").find(".white-popup").find(".feeds-content").css({"overflow":"unset"});}
function skLayoutSliderArrowUI(sk_medium_publication_feed){var carousel_feeds_height=getDsmSetting(sk_medium_publication_feed,'post_height');if(carousel_feeds_height<400){carousel_feeds_height=400;}
sk_medium_publication_feed.find(".sk_medium_publication_feed_grid-content").css({"height":parseInt(carousel_feeds_height)+"px"});sk_medium_publication_feed.find(".sk_medium_publication_content").css({"height":parseInt(carousel_feeds_height)-50+"px",});var arrow_background_color=getDsmSetting(sk_medium_publication_feed,"arrow_background_color");var arrow_color=getDsmSetting(sk_medium_publication_feed,"arrow_color");var arrow_opacity=getDsmSetting(sk_medium_publication_feed,"arrow_opacity");sk_medium_publication_feed.find(".swiper-button-prev i,.swiper-button-next i").mouseover(function(){jQuery(this).css({"opacity":"1","border-color":arrow_background_color,});}).mouseout(function(){jQuery(this).css({"border-color":arrow_color,"opacity":arrow_opacity});});sk_medium_publication_feed.find(".swiper-button-prev i,.swiper-button-next i").css({"border-color":arrow_color,"opacity":arrow_opacity,"color":arrow_color});sk_medium_publication_feed.find(".swiper-button-spinner").css({"color":arrow_color});sk_medium_publication_feed.find(".grid-medium-publication-feed,.medium-publication-feed-root-container").css({"width":"86%","margin":"0 auto",});setTimeout(function(){skLayoutSliderArrowHeight(sk_medium_publication_feed);},600);}
function applyPopupUI(jQuery,sk_medium_publication_feed){var pop_up_bg_color=sk_medium_publication_feed.find('.pop_up_bg_color').text();var pop_up_font_color=sk_medium_publication_feed.find('.pop_up_font_color').text();var pop_up_link_color=sk_medium_publication_feed.find('.pop_up_link_color').text();$('.sk_medium_publication_feed_whole_article, .sk_medium_publication_feed_whole_article p, .sk_medium_publication_feed_whole_article h2, .sk_medium_publication_feed_whole_article h3').css({'color':pop_up_font_color,'background':pop_up_bg_color})
$('.sk_medium_publication_feed_whole_article a').css({'color':pop_up_link_color})
jQuery(".sk_medium_publication_feed_white_pop_up .popup-content-holder").css({"padding":getDsmSetting(sk_medium_publication_feed,"item_content_padding")+"px"});sk_medium_publication_feed.find('div.sk_medium_publication_feed_white_pop_up').find('iframe').css('width',"100%");sk_medium_publication_feed.find('div.sk_medium_publication_feed_white_pop_up').find('iframe').attr('width',1000);sk_medium_publication_feed.find('div.sk_medium_publication_feed_white_pop_up').find('iframe').attr('height',450);}
function applyCustomUi(jQuery,sk_medium_publication_feed){sk_medium_publication_feed.find(".loading-img").hide();var sk_medium_publication_feed_width=sk_medium_publication_feed.find('.sk_medium_publication_feed_width').text();sk_medium_publication_feed.css({'width':'100%'});var sk_medium_publication_feed_width=sk_medium_publication_feed.innerWidth();sk_medium_publication_feed.css({'height':'auto'});sk_medium_publication_feed.find(".medium_publication_content_container").css({'padding':getDsmSetting(sk_medium_publication_feed,"item_content_padding")+"px"});var column_count=getDsmSetting(sk_medium_publication_feed,"column_count");if(jQuery(document).width()<=320||jQuery(document).width()<=481||jQuery(document).width()<=641){column_count=2;if((getDsmSetting(sk_medium_publication_feed,"column_count")==1||jQuery(document).width()<=430)){column_count=1;}}
if(getDsmSetting(sk_medium_publication_feed,"layout")==3){sk_medium_publication_feed_width=sk_medium_publication_feed.find('.grid-medium-publication').width();}
var border_size=0;var background_color="#555555";var space_between_images=sk_medium_publication_feed.find('.space_between_images').text();var margin_between_images=parseFloat(parseFloat(space_between_images).toFixed(2)/2);var scroll_width=getScrollbarWidth();var scroll_width_d=scroll_width/parseInt(column_count);scroll_width_d=scroll_width_d+(scroll_width_d*(-1));var total_space_between_images=parseFloat(space_between_images).toFixed(2)*parseFloat(column_count);var pic_width=((parseFloat(sk_medium_publication_feed_width).toFixed(2)-parseFloat(total_space_between_images).toFixed(2))/parseFloat(column_count).toFixed(2))-(scroll_width_d);var sk_medium_publication_feed_width_minus_space_between_images=parseFloat(sk_medium_publication_feed_width).toFixed(2)-parseFloat(space_between_images).toFixed(2);sk_medium_publication_feed.css({'font-family':getDsmSetting(sk_medium_publication_feed,"font_family"),'width':sk_medium_publication_feed_width_minus_space_between_images,'background-color':getDsmSetting(sk_medium_publication_feed,"widget_bg_color"),'color':getDsmSetting(sk_medium_publication_feed,"widget_font_color"),'font-size':getDsmSetting(sk_medium_publication_feed,"details_font_size")+'px',});var text_transform=getDsmSetting(sk_medium_publication_feed,"title_all_caps")==1?"uppercase":"";sk_medium_publication_feed.find('.sk-medium-publication-feed-name .sk_feed_name_link').css({'display':none,'font-size':getDsmSetting(sk_medium_publication_feed,"title_font_size")+'px','color':getDsmSetting(sk_medium_publication_feed,"widget_font_color"),'text-transform':text_transform});sk_medium_publication_feed.find('.medium_publication_post_title').css({'font-size':getDsmSetting(sk_medium_publication_feed,"article_title_font_size")+'px','color':getDsmSetting(sk_medium_publication_feed,"widget_font_color"),'text-transform':text_transform});var text_transform=getDsmSetting(sk_medium_publication_feed,"details_all_caps")==1?"uppercase":"";sk_medium_publication_feed.find('.sk-medium-publication-feed-profile-description').css({'display':none,'text-transform':text_transform,'font-size':getDsmSetting(sk_medium_publication_feed,"details_font_size")+'px',});sk_medium_publication_feed.find('.sk-medium-publication-feed-profile-description a').css({'display':none,'color':getDsmSetting(sk_medium_publication_feed,"widget_link_color")});sk_medium_publication_feed.find(".sk-medium-publication-feed-profile-description a").mouseover(function(){$(this).css({'display':none,'color':getDsmSetting(sk_medium_publication_feed,"feed_link_hover_color")});}).mouseout(function(){$(this).css({'color':getDsmSetting(sk_medium_publication_feed,"widget_link_color")});});sk_medium_publication_feed.find('.medium_publication_post_title').css({'color':getDsmSetting(sk_medium_publication_feed,"details_font_color")});sk_medium_publication_feed.find('.grid-item-medium-publication-feed .medium_publication_post_creator .sk_creator_link').css({'color':getDsmSetting(sk_medium_publication_feed,"details_link_color")});sk_medium_publication_feed.find(".grid-item-medium-publication-feed .medium_publication_post_creator .sk_creator_link").mouseover(function(){$(this).css({'color':getDsmSetting(sk_medium_publication_feed,"details_link_hover_color")});}).mouseout(function(){$(this).css({'color':getDsmSetting(sk_medium_publication_feed,"details_link_color")});});sk_medium_publication_feed.find('.medium_publication_post_date').css({'color':getDsmSetting(sk_medium_publication_feed,"details_secondary_font_color")});jQuery('.sk-pop-ig-post').css({'font-family':getDsmSetting(sk_medium_publication_feed,"font_family")});sk_medium_publication_feed.find('.sk_medium_publication_feed_grid-content').css({'background-color':getDsmSetting(sk_medium_publication_feed,"details_bg_color"),'color':getDsmSetting(sk_medium_publication_feed,"details_font_color"),'padding':getDsmSetting(sk_medium_publication_feed,"item_content_padding")+"px"});sk_medium_publication_feed.find('.sk-secondary-data').css({'color':getDsmSetting(sk_medium_publication_feed,"details_secondary_font_color"),'font-family':getDsmSetting(sk_medium_publication_feed,"font_family")});sk_medium_publication_feed.find('.sk-fb-page-name').css({'font-family':getDsmSetting(sk_medium_publication_feed,"font_family")});sk_medium_publication_feed.find('.sk-ww-medium-publication-feed-item').css({'color':getDsmSetting(sk_medium_publication_feed,"details_font_color"),'border-top':'thin solid '+getDsmSetting(sk_medium_publication_feed,"post_separator_color")});var margin_bottom_sk_ig_load_more_posts=space_between_images;if(margin_bottom_sk_ig_load_more_posts==0){margin_bottom_sk_ig_load_more_posts=5;}
sk_medium_publication_feed.find(".sk-medium-publication-feed-load-more-posts").css({'margin-bottom':margin_bottom_sk_ig_load_more_posts+'px'});sk_medium_publication_feed.find(".facebook-feed-user-container, .sk-medium-publication-feed-load-more-posts, .sk-medium-publication-feed-bottom-follow-btn, .sk-read-more-btn").css({'background-color':getDsmSetting(sk_medium_publication_feed,"button_bg_color"),'border-color':getDsmSetting(sk_medium_publication_feed,"button_bg_color"),'color':getDsmSetting(sk_medium_publication_feed,"button_text_color")});sk_medium_publication_feed.find(".facebook-feed-user-container, .sk-medium-publication-feed-load-more-posts, .sk-medium-publication-feed-bottom-follow-btn, .sk-read-more-btn").mouseover(function(){$(this).css({'background-color':getDsmSetting(sk_medium_publication_feed,"button_hover_bg_color"),'border-color':getDsmSetting(sk_medium_publication_feed,"button_hover_bg_color"),'color':getDsmSetting(sk_medium_publication_feed,"button_hover_text_color")});}).mouseout(function(){$(this).css({'background-color':getDsmSetting(sk_medium_publication_feed,"button_bg_color"),'border-color':getDsmSetting(sk_medium_publication_feed,"button_bg_color"),'color':getDsmSetting(sk_medium_publication_feed,"button_text_color")});});jQuery(".mfp-content .sk_view_more_comments, .mfp-content .sk_add_comment").css({'background-color':getDsmSetting(sk_medium_publication_feed,"button_bg_color"),'border-color':getDsmSetting(sk_medium_publication_feed,"button_bg_color"),'color':getDsmSetting(sk_medium_publication_feed,"button_text_color")});jQuery(".mfp-content .sk_view_more_comments, .mfp-content .sk_add_comment").mouseover(function(){$(this).css({'background-color':getDsmSetting(sk_medium_publication_feed,"button_hover_bg_color"),'border-color':getDsmSetting(sk_medium_publication_feed,"button_hover_bg_color"),'color':getDsmSetting(sk_medium_publication_feed,"button_hover_text_color")});}).mouseout(function(){$(this).css({'background-color':getDsmSetting(sk_medium_publication_feed,"button_bg_color"),'border-color':getDsmSetting(sk_medium_publication_feed,"button_bg_color"),'color':getDsmSetting(sk_medium_publication_feed,"button_text_color")});});var padding_sk_ig_bottom_btn_container=margin_between_images;if(padding_sk_ig_bottom_btn_container==0){padding_sk_ig_bottom_btn_container=5;}
sk_medium_publication_feed.find(".sk-medium-publication-feed-bottom-btn-container").css({'padding':padding_sk_ig_bottom_btn_container+'px'});sk_medium_publication_feed.find('.sk-medium-publication-feed-profile-description strong').css({'color':getDsmSetting(sk_medium_publication_feed,"details_font_color")});var text_transform=getDsmSetting(sk_medium_publication_feed,"details_all_caps")==1?"uppercase":"";sk_medium_publication_feed.find('.medium_publication_post_meta, .sk_medium_publication_feed_whole_article p, .sk_medium_publication_feed_whole_article blockquote').css({'font-size':getDsmSetting(sk_medium_publication_feed,"details_font_size")+'px','text-transform':text_transform});var text_transform=getDsmSetting(sk_medium_publication_feed,"title_all_caps")==1?"uppercase":"";sk_medium_publication_feed.find('.sk_medium_publication_feed_whole_article h2, .sk_medium_publication_feed_whole_article h3, .sk_medium_publication_feed_whole_article h4').css({'font-size':getDsmSetting(sk_medium_publication_feed,"title_font_size")+'px','text-transform':text_transform});jQuery('.sk_powered_by a').css({'background-color':getDsmSetting(sk_medium_publication_feed,"details_bg_color"),'color':getDsmSetting(sk_medium_publication_feed,"details_font_color"),'font-size':getDsmSetting(sk_medium_publication_feed,"details_font_size"),});sk_medium_publication_feed.find('.sk-fb-event-item, .sk_powered_by').css({'margin-bottom':getDsmSetting(sk_medium_publication_feed,"space_between_events")+'px'});makeResponsive(jQuery,sk_medium_publication_feed);jQuery('head').append('<style type="text/css">'+getDsmSetting(sk_medium_publication_feed,"custom_css")+'</style>');applyPopupUI(jQuery,sk_medium_publication_feed);sk_medium_publication_feed.find('a').attr('target','_blank');}function loadGoogleFont(font_family){var web_safe_fonts=["Inherit","Impact, Charcoal, sans-serif","'Palatino Linotype', 'Book Antiqua', Palatino, serif","Century Gothic, sans-serif","'Lucida Sans Unicode', 'Lucida Grande', sans-serif","Verdana, Geneva, sans-serif","Copperplate, 'Copperplate Gothic Light', fantasy","'Courier New', Courier, monospace","Georgia, Serif"];if(!web_safe_fonts.includes(font_family)){try{loadCssFile("https://fonts.googleapis.com/css?family="+font_family);}catch(error){}}}
function addDescriptiveTagAttributes(_sk,add_to_img=true){_sk.find('a').each(function(i,v){var title=jQuery(v).text();jQuery(v).attr('title',title);});if(add_to_img){_sk.find('img').each(function(i,v){var src=jQuery(v).attr('src');jQuery(v).attr('alt','Post image');});}}
function getClientId(){var _gaCookie=document.cookie.match(/(^|[;,]\s?)_ga=([^;,]*)/);if(_gaCookie)return _gaCookie[2].match(/\d+\.\d+$/)[0];}
function getSkEmbedId(sk_class){var embed_id=sk_class.attr('embed-id');if(embed_id==undefined){embed_id=sk_class.attr('data-embed-id');}
return embed_id;}
function getSkSetting(sk_class,key){return sk_class.find("div."+key).text();}
function setCookieSameSite(){document.cookie="AC-C=ac-c;expires=Fri, 31 Dec 2025 23:59:59 GMT;path=/;HttpOnly;SameSite=Lax";}
function getIEVersion(){var sAgent=window.navigator.userAgent;var Idx=sAgent.indexOf("MSIE");if(Idx>0)
return parseInt(sAgent.substring(Idx+5,sAgent.indexOf(".",Idx)));else if(!!navigator.userAgent.match(/Trident\/7\./))
return 11;else
return 0;}
function isSafariBrowser(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf('safari')!=-1){if(ua.indexOf('chrome')>-1){return 0;}else{return 1;}}}
if(getIEVersion()>0||isSafariBrowser()>0){loadIEScript('https://cdn.jsdelivr.net/bluebird/3.5.0/bluebird.min.js');loadIEScript('https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.js');}
function loadIEScript(url){var scriptTag=document.createElement('script');scriptTag.setAttribute("type","text/javascript");scriptTag.setAttribute("src",url);(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(scriptTag);}
function kFormatter(num){return Math.abs(num)>999?Math.sign(num)*((Math.abs(num)/1000).toFixed(1))+'k':Math.sign(num)*Math.abs(num)}
function sk_increaseView(user_info){try{if(user_info&&user_info.status&&(user_info.status==1||user_info.status==6||user_info.status==7)){jQuery.getJSON('https://api.ipify.org?format=json',function(data){var update_views_url="https://views.accentapi.com/add_view.php?user_id="+user_info.id+"&url="+document.URL+"&ip_address="+data.ip+"&embed_id="+user_info.embed_id;if(app_url.includes("local")&&sk_app_url){update_views_url="https://localtesting.com/accentapiviews/add_view.php?user_id="+user_info.id+"&url="+document.URL+"&ip_address="+data.ip+"&embed_id="+user_info.embed_id;}
jQuery.ajax(update_views_url);});}}
catch(err){console.log("Error retrieving ip address.");}}
function isTooDarkColor(hexcolor){var r=parseInt(hexcolor.substr(1,2),16);var g=parseInt(hexcolor.substr(3,2),16);var b=parseInt(hexcolor.substr(4,2),16);if(hexcolor.indexOf('rgb')!=-1){let rgbstr=hexcolor;let v=getRGB(rgbstr);r=v[0];g=v[1];b=v[2];}
b=isNaN(b)?0:b;var yiq=((r*299)+(g*587)+(b*114))/1000;if(yiq<60){}
else{}
return yiq<60?true:false;}
function linkify(html){var temp_text=html.split("https://www.").join("https://");temp_text=temp_text.split("www.").join("https://www.");var exp=/((href|src)=["']|)(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;return temp_text.replace(exp,function(){return arguments[1]?arguments[0]:"<a href=\""+arguments[3]+"\">"+arguments[3]+"</a>"});}
function skGetEnvironmentUrls(folder_name){var scripts=document.getElementsByTagName("script");var scripts_length=scripts.length;var search_result=-1;var other_result=-1;var app_url="https://widgets.sociablekit.com/";var app_backend_url="https://api.accentapi.com/v1/";var app_file_server_url="https://data.accentapi.com/feed/";var sk_app_url="https://sociablekit.com/app/";var sk_api_url="https://api.sociablekit.com/";var sk_img_url="https://images.sociablekit.com/";for(var i=0;i<scripts_length;i++){var src_str=scripts[i].getAttribute('src');if(src_str!=null){var other_folder="";if(folder_name=='facebook-page-playlist'){other_folder='facebook-page-playlists';}
else if(folder_name=='linkedin-page-posts'){other_folder='linkedin-page-post';}
else if(folder_name=='linkedin-profile-posts'){other_folder='linkedin-profile-post';}
else if(folder_name=='facebook-hashtag-posts'){other_folder='facebook-hashtag-feed';}
else if(folder_name=='facebook-page-events'){other_folder='facebook-events';}
else if(folder_name=='facebook-page-posts'){other_folder='facebook-feed';if(document.querySelector(".sk-ww-facebook-feed")){var element=document.getElementsByClassName("sk-ww-facebook-feed")[0];element.classList.add("sk-ww-facebook-page-posts");}}
other_result=src_str.search(other_folder);search_result=src_str.search(folder_name);if(search_result>=1||other_result>=1){var src_arr=src_str.split(folder_name);app_url=src_arr[0];app_url=app_url.replace("displaysocialmedia.com","sociablekit.com");if(app_url.search("local")>=1){app_backend_url="http://localhost:3000/v1/";app_url="https://localtesting.com/SociableKIT_Widgets/";app_file_server_url="https://localtesting.com/SociableKIT_FileServer/feed/";sk_app_url="https://localtesting.com/SociableKIT/";sk_api_url="http://127.0.0.1:8000/";sk_img_url="https://localtesting.com/SociableKIT_Images/";}
else{app_url="https://widgets.sociablekit.com/";}}}}
return{"app_url":app_url,"app_backend_url":app_backend_url,"app_file_server_url":app_file_server_url,"sk_api_url":sk_api_url,"sk_app_url":sk_app_url,"sk_img_url":sk_img_url};}
function changeBackSlashToBR(text){if(text){for(var i=1;i<=10;i++){text=text.replace('\n','</br>');}}
return text;}
function sKGetScrollbarWidth(){var outer=document.createElement('div');outer.style.visibility='hidden';outer.style.overflow='scroll';outer.style.msOverflowStyle='scrollbar';document.body.appendChild(outer);var inner=document.createElement('div');outer.appendChild(inner);var scrollbarWidth=(outer.offsetWidth-inner.offsetWidth);outer.parentNode.removeChild(outer);return scrollbarWidth;}
function isValidURL(url){const urlPattern=/^(http(s)?:\/\/)?(www\.)?[a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$/;return urlPattern.test(url);}
async function showUrlData(element,url,post_id,type="",show_thumbnail=1){element.hide();var free_data_url=app_file_server_url.replace("feed/","get_fresh_url_tags.php")+'?post_id='+post_id+'&url='+url;var read_one_url=app_file_server_url.replace("feed","url-tags")+post_id+".json";if(jQuery('.sk_version').text()){read_one_url+="?v="+jQuery('.sk_version').text();}
fetch(read_one_url,{method:'get',cache:'no-cache'}).then(async response=>{if(response.ok){let data=await response.json();if(data&&data.status&&data.status==418){displayUrlData(data,element,type,show_thumbnail,post_id);data=await jQuery.ajax(free_data_url);}
return data;}
else{response=await jQuery.ajax(free_data_url);displayUrlData(response,element,type,show_thumbnail,post_id);return response;}}).then(async response=>{if(response!=undefined){displayUrlData(response,element,type,show_thumbnail,post_id);}else{response=await jQuery.ajax(free_data_url);displayUrlData(response,element,type,show_thumbnail,post_id);}}).catch(async error=>{var data=await jQuery.ajax(free_data_url);displayUrlData(data,element,type,show_thumbnail,post_id);});}
async function displayUrlData(response,element,type,show_thumbnail=1,post_id){var meta_holder=jQuery(element);var html="";if(!response||response.error){if(meta_holder.html()){meta_holder.show();}
return;}
if(response.message&&response.message=="Data not available. Please try again."){return;}
if(response.messages&&response.messages.length>0&&response.messages[0]=="PDF files that are over 10Mb are not supported by Google Docs Viewer"){var data=response.url;if(response.url){data=response.url.replace("https://","").split("/");}
if(data.length>0){if(data.length>1){response.title=data[data.length-1];}
response.description=data[0].replace("www.","");}}
if(post_id=="7059257055500492800"){response.url+="?id=122630";}
html+="<a href='"+response.url+"' link-only target='_blank'>";html+="<div class='sk-link-article-container' style='background: #eeeeee;color: black !important; font-weight: bold !important; border-radius: 2px; border: 1px solid #c3c3c3; box-sizing: border-box; word-wrap: break-word;'>";if(show_thumbnail==1){html+="<image alt='No alternative text description for this image' class='sk-link-article-image sk_post_img_link' onerror='this.style.display=\"none\"' src='"+response.thumbnail_url+"'/>";}
if(response.title){html+="<div class='sk-link-article-title' style='padding: 8px;'>"+response.title+"</div>";}
else if(response.url&&response.url.indexOf(".pdf")!=-1){html+=response.html;}
if(type&&type==6){if(response.description&&response.description.length>0){response.description=response.description.length>140?response.description.substring(0,140)+' ...':response.description;}}
if(response.description&&response.description.indexOf("[vc_row]")!==-1&&response.url){var pathArray=response.url.split('/');var protocol=pathArray[0];if(pathArray.length>2){var host=pathArray[2];var url=protocol+'//'+host;html+="<div class='sk-link-article-description' style='padding: 8px;color: grey;font-weight: 100;font-size: 14px;'>"+url+"</div>";}}
else if(response.description&&response.description.indexOf("fb_built")==-1&&response.description!="null"){if(response.url){var domain=new URL(response.url).hostname;response.description=domain;}
html+="<div class='sk-link-article-description' style='padding: 8px;color: #000000;font-weight: 100;font-size: 14px;'>"+response.description+"</div>";}
else if(response.url&&response.url.includes('instagram.com/p/')){html+="<image style='padding: 8px;' alt='No alternative text description for this image' class='sk-ig-default' onerror='this.style.display=\"none\"' src='https://i1.wp.com/sociablekit.com/wp-content/uploads/2019/01/instagram.png'/>";html+="<div class='sk-link-article-description' style='padding: 8px;margin-left:15%;color: #000000;font-weight: 600;font-size: 14px;'>View this post in instagram</div>";html+="<div class='sk-link-article-description' style='padding: 0px 8px ;margin-left:15%;margin-bottom:10px;color: #000000;font-weight: 100;font-size: 10px;'>"+response.url+"</div>";}
html+="</div>";html+="</a>";meta_holder.html(html);meta_holder.css('display','block');meta_holder.css('margin-bottom','15px');meta_holder.find('.sk-ig-default').closest('.sk-link-article-container').css('display','inline-block');meta_holder.find('.sk-ig-default').closest('.sk-link-article-container').css('width','100%');meta_holder.find('.sk-ig-default').css('width','20%');meta_holder.find('.sk-ig-default').css('float','left');applyMasonry();}
function slugifyString(str){str=str.replace(/^\s+|\s+$/g,'');str=str.toLowerCase();var from="ÃÃ„Ã‚Ã€ÃƒÃ…ÄŒÃ‡Ä†ÄŽÃ‰ÄšÃ‹ÃˆÃŠáº¼Ä”È†ÃÃŒÃŽÃÅ‡Ã‘Ã“Ã–Ã’Ã”Ã•Ã˜Å˜Å”Å Å¤ÃšÅ®ÃœÃ™Ã›ÃÅ¸Å½Ã¡Ã¤Ã¢Ã Ã£Ã¥ÄÃ§Ä‡ÄÃ©Ä›Ã«Ã¨Ãªáº½Ä•È‡Ã­Ã¬Ã®Ã¯ÅˆÃ±Ã³Ã¶Ã²Ã´ÃµÃ¸Ã°Å™Å•Å¡Å¥ÃºÅ¯Ã¼Ã¹Ã»Ã½Ã¿Å¾Ã¾ÃžÄÄ‘ÃŸÃ†aÂ·/_,:;";var to="AAAAAACCCDEEEEEEEEIIIINNOOOOOORRSTUUUUUYYZaaaaaacccdeeeeeeeeiiiinnooooooorrstuuuuuyyzbBDdBAa------";for(var i=0,l=from.length;i<l;i++){str=str.replace(new RegExp(from.charAt(i),'g'),to.charAt(i));}
str=str.replace(/[^a-z0-9 -]/g,'').replace(/\s+/g,'-').replace(/-+/g,'-');return str;}
function skGetBranding(sk_,user_info){sk_.find('.sk_branding').remove();sk_.find('div.user_email').remove();var html="";if(!user_info)
return;var slugify_string="";if(user_info.solution_name){slugify_string=slugifyString(user_info.solution_name);user_info.tutorial_link="https://www.sociablekit.com/tutorials/embed-"+slugify_string+"-website/";if(user_info.website_builder){user_info.tutorial_link="https://www.sociablekit.com/tutorials/embed-"+slugify_string;slugify_string=slugifyString(user_info.website_builder);user_info.tutorial_link=user_info.tutorial_link+"-"+slugify_string;}}
if(user_info.type==9){user_info.tutorial_link="https://www.sociablekit.com/sync-facebook-page-events-to-google-calendar/";}
else if(user_info.type==26){user_info.tutorial_link="https://www.sociablekit.com/how-to-sync-facebook-group-events-to-google-calendar-on-website/";}
if(user_info.show_branding&&(user_info.show_branding==1||user_info.show_branding=="true")||user_info.show_branding==true){var fontFamily=getSkSetting(sk_,"font_family");var link_color=getSkSetting(sk_,"details_link_color");var details_bg_color=getSkSetting(sk_,"details_bg_color");if(link_color==""){link_color="rgb(52, 128, 220)";}
if(details_bg_color&&isTooDarkColor(link_color)==false&&isTooDarkColor(details_bg_color)==false){link_color='#3480dc';}
var temporary_tutorial_link=user_info.tutorial_link;if(temporary_tutorial_link.endsWith("/")==false){temporary_tutorial_link=temporary_tutorial_link+"/";}
var linkedin_widgets=[33,34,44,58,75,99,100,103];if(linkedin_widgets.includes(user_info.type)&&user_info.embed_id%2==1){var website_builder="website";if(user_info.website_builder){website_builder=slugifyString(user_info.website_builder);}
temporary_tutorial_link="https://www.sociablekit.com/tutorials/embed-linkedin-feed-"+website_builder+"/";}
if(user_info.type==5&&user_info.embed_id%2==1){temporary_tutorial_link=temporary_tutorial_link.replace("profile","feed")}
var facebook_feed=[1,4,9,10,11,36,38,43,12,24,26,49,2,8,3,18,19,28,30,61];if(facebook_feed.includes(user_info.type)&&user_info.embed_id%2==1){var website_builder="website";if(user_info.website_builder){website_builder=slugifyString(user_info.website_builder);}
temporary_tutorial_link="https://www.sociablekit.com/tutorials/embed-facebook-feed-"+website_builder+"/";}
var threads_feed=[110];if(threads_feed.includes(user_info.type)&&user_info.embed_id%2==0){var website_builder="website";if(user_info.website_builder){website_builder=slugifyString(user_info.website_builder);}
temporary_tutorial_link="https://www.sociablekit.com/tutorials/embed-threads-"+website_builder+"/";}
var nofollow_attribute="";if(window.location.href.includes("clean-concept-plus")){nofollow_attribute="rel='nofollow'";}
html+="<div class='sk_branding' style='padding:10px; display:block !important; text-align:center; text-decoration: none !important; color:#555; font-family:"+fontFamily+"; font-size:15px;'>";html+="<a "+nofollow_attribute+" class='tutorial_link' href='"+temporary_tutorial_link+"' target='_blank' style='text-underline-position:under; color:"+link_color+";font-size:15px;'>";if(linkedin_widgets.includes(user_info.type)&&user_info.embed_id%2==1){html+="Embed LinkedIn Feed on your ";if(user_info.website_builder&&user_info.website_builder!="Website"){html+=user_info.website_builder;}}else if(facebook_feed.includes(user_info.type)&&user_info.embed_id%2==1){html+="Embed Facebook Feed on your ";if(user_info.website_builder&&user_info.website_builder!="Website"){html+=user_info.website_builder;}}else{html+="Embed "+user_info.solution_name+" on your ";if(user_info.website_builder&&user_info.website_builder!="Website"){html+=user_info.website_builder;}}
html+=" website";html+="</a>";html+="</div>";}
return html;}
function getRGB(rgbstr){return rgbstr.substring(4,rgbstr.length-1).replace(/ /g,'').replace('(','').split(',');}
function freeTrialEndedMessage(solution_info){var sk_error_message="<div class='sk_trial_ended_message'>";sk_error_message+="Customized feed is powered by <strong><a href='https://www.sociablekit.com/' target='_blank'>SociableKIT</a></strong>.<br>";sk_error_message+="If you're the owner of this website, your 7-day Free Trial has ended.<br>";sk_error_message+="If you want to continue using our services, please <strong><a target='_blank' href='https://www.sociablekit.com/app/users/subscription/subscription'>subscribe now</a></strong>.";sk_error_message+="</div>";return sk_error_message;}
function isFreeTrialEnded(start_date){var start_date=new Date(start_date);var current_date=new Date();var difference=current_date.getTime()-start_date.getTime();difference=parseInt(difference/(1000*60*60*24));return difference>7?true:false;}
function unableToLoadSKErrorMessage(solution_info,additional_error_messages){var sk_error_message="<ul class='sk_error_message'>";sk_error_message+="<li><a href='"+solution_info.embed_id+"' target='_blank'>Customized "+solution_info.solution_name+" feed by SociableKIT</a></li>";console.log(solution_info);sk_error_message+="<li>Unable to load "+solution_info.solution_name+".</li>";for(var i=0;i<additional_error_messages.length;i++){sk_error_message+=additional_error_messages[i];}
sk_error_message+="<li>If you think there is a problem, <a target='_blank' href='https://go.crisp.chat/chat/embed/?website_id=2e3a484e-b418-4643-8dd2-2355d8eddc6b'>chat with support here</a>. We will solve it for you.</li>";sk_error_message+="</ul>";return sk_error_message;}
function widgetValidation(_sk,data){if(data.user_info){var user_info=data.user_info;user_info.trial_ended=false;if(user_info.status==7&&user_info.cancellation_date){var cancellation_date=new Date(user_info.cancellation_date).setHours(0,0,0,0);var current_date=new Date().setHours(0,0,0,0);user_info.show_feed=current_date>cancellation_date?false:true;var activation_date=new Date(user_info.activation_date).setHours(0,0,0,0);if(activation_date>cancellation_date){user_info.show_feed=true;}}
else if(user_info.status==0||user_info.status==2||user_info.status==10){user_info.show_feed=false;}
if(user_info.type==43||user_info.type==38){var sk_error_message=generateBlueMessage(_sk,user_info);_sk.find(".first_loading_animation").hide();_sk.html(sk_error_message);}
if(!user_info.show_feed){var sk_error_message=generateBlueMessage(_sk,user_info);_sk.find(".first_loading_animation").hide();_sk.html(sk_error_message);}
return user_info.show_feed;}}
function generateBlueMessage(_sk,user_info){var tutorial_link="";var sk_error_message="";if(user_info.solution_name){var slugify_string=slugifyString(user_info.solution_name);tutorial_link="https://www.sociablekit.com/tutorials/embed-"+slugify_string+"-website/";}
if(user_info.type==9){tutorial_link="https://www.sociablekit.com/sync-facebook-page-events-to-google-calendar/";}
else if(user_info.type==26){tutorial_link="https://www.sociablekit.com/how-to-sync-facebook-group-events-to-google-calendar-on-website/";}
else if(user_info.type==43||user_info.type==38){var sk_error_message="<div class='sk_error_message'>";sk_error_message+="<p style='text-align: center !important; margin: 1rem'>"+user_info.solution_name+" are currently unavailable, please choose another <a href='https://www.sociablekit.com/demos/' target='_blank'>widget here</a></p>";sk_error_message+="</div>";return sk_error_message;}
if(user_info.show_feed==false){if(!user_info.message||user_info.message==""){var sk_error_message="<ul class='sk_error_message'>";sk_error_message+="<li><a href='"+tutorial_link+"' target='_blank'>"+user_info.solution_name+" powered by SociableKIT</a></li>";sk_error_message+="<li>If youâ€™re the owner of this website or SociableKIT account used, we found some errors with your account.</li>";sk_error_message+="<li>Please login your SociableKIT account to fix it.</li>";sk_error_message+="</ul>";user_info.message=sk_error_message;}
sk_error_message=user_info.message;}
else if(user_info.solution_name==null&&user_info.type==null&&user_info.start_date==null){sk_error_message="<p class='sk_error_message'>";sk_error_message+="The SociableKIT solution does not exist. If you think this is a mistake, please contact support.";sk_error_message+="</p>";}
else{sk_error_message="<div class='sk_error_message'>";sk_error_message+="<div style='display: inline-flex;width:100%;'>";sk_error_message+="<div>";sk_error_message+="<ul>";sk_error_message+="<li><a href='"+tutorial_link+"' target='_blank'>Customized "+user_info.solution_name+" feed by SociableKIT</a></li>";if(user_info.type==5){sk_error_message+="<li>Make sure your instagram account <a target='_blank' href='https://www.instagram.com/"+getDsmSetting(_sk,'username')+"' target='_blank'><b>@"+getDsmSetting(_sk,'username')+"</b></a> is connected.</li>";}
else if(user_info.type==22||user_info.type==39){sk_error_message+="<li>Please make sure that the <a href='https://www.sociablekit.com/how-to-identify-google-place-id/' target='blank'><b> Google Place ID </b></a> you enter is correct.</li>";}
else{sk_error_message+="<li>Please make sure that the <b> Source ID/Username </b> you enter is correct.</li>";}
sk_error_message+="<li>Our system is syncing with your "+user_info.solution_name+" feed, please check back later.</li>";sk_error_message+="<li>It usually takes only a few minutes, but might take up to 24 hours. We appreciate your patience.</li>";sk_error_message+="<li>We will notify you via email once your "+user_info.solution_name+" feed is ready.</li>";sk_error_message+="<li>Please make sure that the source ID/Username you input is correct.</li>";sk_error_message+="<li>If you think there is a problem, <a target='_blank' href='https://go.crisp.chat/chat/embed/?website_id=2e3a484e-b418-4643-8dd2-2355d8eddc6b'>chat with support here</a>. We will solve it for you.</li>";sk_error_message+="</ul>";sk_error_message+="</div>";sk_error_message+="</div>";sk_error_message+="</div>";}
return sk_error_message;}
function generateSolutionMessage(_sk,embed_id){var json_url=sk_api_url+"api/user_embed/info/"+embed_id;var sk_error_message="";jQuery.getJSON(json_url,function(data){if(data.type==1&&data.encoded==true){loadEvents(_sk);}
else if(data.type==44&&data.encoded==true){loadFeed(_sk);}
else if(data.type==58&&data.encoded==true){var no_data_text=_sk.find('.no_data_text').text();_sk.html("<div style='padding: 20px;text-align: center;'>"+no_data_text+"</div>");}
else if(data.type==67&&data.encoded==true){loadEvents(_sk);}
else if(data.type==74&&data.encoded==true){_sk.html("<div>No jobs yet, please try again later.</div>");}
else{var sk_error_message=generateBlueMessage(_sk,data);_sk.find(".first_loading_animation").hide();_sk.html(sk_error_message);}}).fail(function(e){console.log(e);});}
function copyInput(copy_button,copy_input){var copy_button_orig_html=copy_button.html();copy_input.select();try{var successful=document.execCommand('copy');var msg=successful?'successful':'unsuccessful';if(msg=='successful'){copy_button.html("<i class='fa fa-clipboard'></i> Copied!");setTimeout(function(){copy_button.html(copy_button_orig_html);},3000);}
else{alert('Copying text command was '+msg+'.');}}
catch(err){alert('Oops, unable to copy.');}}
function getDefaultLinkedInPageProfilePicture(profile_picture){if(profile_picture&&profile_picture.indexOf("data:image/gif")!=-1){profile_picture="https://gmalcilk.sirv.com/iamge.JPG";}
return profile_picture;}
function detectedSKDashboard(){let parent_url=(window.location!=window.parent.location)?document.referrer:document.location.href;if(parent_url&&(parent_url.indexOf("sociablekit.com")!=-1||parent_url.indexOf("local")!=-1)){return true;}
return false;}
function getSKDashboardPremiumTrialMessage(){var sk_error_message="";sk_error_message+="<ul class='sk_error_message'>";sk_error_message+="<li>Your 7-days premium trial has ended.</li>";sk_error_message+="<li>Please purchase a <a href='https://www.sociablekit.com/app/users/subscription/subscription?action=subscribe_now'>SociableKIT subscription plan</a> ";sk_error_message+="to save your widget customizations, save time with automatic sync, enjoy priority support, and get a 50% discount on any annual plans. Donâ€™t miss out!</li>";sk_error_message+="<li>You may also choose to <a href='https://help.sociablekit.com/en-us/article/how-to-activate-the-free-plan-1l3o0nt/'>activate the free plan</a> if you don't need our premium features.</li>";sk_error_message+="</ul>";return sk_error_message;}
function getSocialIcon(category)
{var post_items='';if(category.indexOf("Facebook")!=-1){post_items+="<i class='fab fa-facebook' aria-hidden='true'></i>";}
else if(category.indexOf("Instagram")!=-1){post_items+="<i class='fab fa-instagram' aria-hidden='true'></i>";}
else if(category.indexOf("Linkedin")!=-1){post_items+="<i class='fab fa-linkedin' aria-hidden='true'></i>";}
else if(category.indexOf("Youtube")!=-1){post_items+="<i class='fab fa-youtube' aria-hidden='true'></i>";}
else if(category.indexOf("Google")!=-1){post_items+="<i class='fab fa-google' aria-hidden='true'></i>";}
else if(category.indexOf("Twitter")!=-1){post_items+='<i class="fa-brands fa-x-twitter"></i>';}
else if(category.indexOf("Twitch")!=-1){post_items+="<i class='fab fa-twitch' aria-hidden='true'></i>";}
else if(category.indexOf("Yelp")!=-1){post_items+="<i class='fab fa-yelp' aria-hidden='true'></i>";}
else if(category.indexOf("Vimeo")!=-1){post_items+="<i class='fab fa-vimeo' aria-hidden='true'></i>";}
else if(category.indexOf("Twitch")!=-1){post_items+="<i class='fab fa-twitch' aria-hidden='true'></i>";}
else if(category.indexOf("Trust")!=-1){post_items+="<i class='fab fa-trustpilot' aria-hidden='true'></i>";}
else if(category.indexOf("Spot")!=-1){post_items+="<i class='fab fa-spotify' aria-hidden='true'></i>";}
return post_items;}
function isFontAwesomeLoaded(){var span=document.createElement('span');span.className='fa';span.style.display='none';document.body.insertBefore(span,document.body.firstChild);var font=css(span,'font-family');if(font.indexOf("fontawesome")==-1){return false;}
document.body.removeChild(span);return true;}
function css(element,property){let font=window.getComputedStyle(element,null).getPropertyValue(property);if(font){font=font.toLowerCase();return font.replace(/' '/g,"");}
return'na';}
function main(){function loadSettingsData(sk_medium_publication_feed,json_settings_url,json_feed_url){fetch(json_feed_url,{method:'get'}).then(function(response){if(!response.ok){loadSettingsData(sk_medium_publication_feed,json_settings_url,json_settings_url)
return;}
response.json().then(function(data){var settings_data=data;original_data=data;if(data.settings){settings_data=data.settings;settings_data.type=20;}
if(!settings_data.type){loadSettingsData(sk_medium_publication_feed,json_settings_url,json_settings_url)
return;}
settings_data.type=20;var web_safe_fonts=["Inherit","Impact, Charcoal, sans-serif","'Palatino Linotype', 'Book Antiqua', Palatino, serif","Century Gothic, sans-serif","'Lucida Sans Unicode', 'Lucida Grande', sans-serif","Verdana, Geneva, sans-serif","Copperplate, 'Copperplate Gothic Light', fantasy","'Courier New', Courier, monospace","Georgia, Serif"];var is_font_included=web_safe_fonts.indexOf(settings_data.font_family);if(is_font_included<0){loadCssFile("https://fonts.googleapis.com/css?family="+settings_data.font_family);}
if(settings_data.show_feed==false){sk_medium_publication_feed.find('.loading-img').hide();sk_medium_publication_feed.prepend(settings_data.message);}
else{var settings_html="";settings_data.show_read_more_button=settings_data.show_read_more_button?settings_data.show_read_more_button:1;settings_html+="<div class='display-none sk-settings' style='display:none;'>";jQuery.each(settings_data,function(key,value){settings_html+="<div class='"+key+"'>"+value+"</div>";});settings_html+="</div>";if(sk_medium_publication_feed.find('.sk-settings').length){}else{sk_medium_publication_feed.prepend(settings_html);}
if(data.css){jQuery('head').append('<style type="text/css">'+data.css+'</style>');}
else{var sk_version=settings_data.sk_version?settings_data.sk_version:1.0;loadCssFile(app_url+"medium-publication-feed/widget_css.php");}
if(getDsmSetting(sk_medium_publication_feed,'layout')==3){loadCssFile(app_url+"libs/swiper/swiper.min.css");loadCssFile(app_url+"libs/swiper/swiper.css?v=ranndomchars");}
settings_html="";if(data.settings){loadFeed(sk_medium_publication_feed);}
else{requestFeedData(sk_medium_publication_feed)}}});}).catch(function(err){loadSettingsData(sk_medium_publication_feed,json_settings_url,json_settings_url);});}
jQuery(document).ready(function($){jQuery('.sk-ww-medium-publication-feed').each(function(){var sk_medium_publication_feed=jQuery(this);var embed_id=getDsmEmbedId(sk_medium_publication_feed);var new_sk_medium_publication_feed_width=jQuery(window).height()+100;sk_medium_publication_feed.height(new_sk_medium_publication_feed_width);var json_settings_url=app_file_server_url.replace('feed','')+"settings/"+embed_id+"/settings.json?nocache="+(new Date()).getTime();var json_feed_url=app_file_server_url+embed_id+".json?nocache="+(new Date()).getTime();loadSettingsData(sk_medium_publication_feed,json_settings_url,json_feed_url);});jQuery(window).resize(function(){jQuery('.sk-ww-medium-publication-feed').each(function(){var sk_medium_publication_feed=jQuery(this);sk_medium_publication_feed.css({'width':'100%'});var new_inner_width=sk_medium_publication_feed.innerWidth();jQuery('.sk_medium_publication_feed_width').text(new_inner_width);applyCustomUi(jQuery,sk_medium_publication_feed);});});jQuery(document).on('click','.medium_publication_post_meta, .sk-ww-medium-publication-feed .medium_publication_post_title, .sk-ww-medium-publication-feed .sk_medium_publication_feed_grid-content img',function(){var clicked_element=jQuery(this);var sk_medium_publication_feed=clicked_element.closest('.sk-ww-medium-publication-feed');var content_src=clicked_element.closest('.sk_medium_publication_feed_grid-content').find('.sk_medium_publication_feed_whole_article');if(getDsmSetting(sk_medium_publication_feed,"show_pop_up")==1){showPopUp(jQuery,content_src,clicked_element,sk_medium_publication_feed);if(jQuery('.mfp-content h2').text().substr(0,15)==jQuery('.mfp-content h3').text().substr(0,15)){jQuery('.mfp-content h2').remove();}}
else{var link=clicked_element.closest('.grid-item-medium-publication-feed').attr('data-link');window.open(link,'_blank');}
jQuery('.mfp-content').css({'font-family':getDsmSetting(sk_medium_publication_feed,"font_family")});});jQuery(document).on('click','.medium_publication_post_meta a',function(){setTimeout(function(){hidePopUp();},100);});jQuery(document).on('click','.sk-medium-publication-feed-load-more-posts',function(){if(jQuery(this).attr('disabled')=="disabled"){return false;}
jQuery(this).attr('disabled','disabled');var current_btn=jQuery(this);var sk_medium_publication_feed=jQuery(this).closest('.sk-ww-medium-publication-feed');var embed_id=getDsmEmbedId(sk_medium_publication_feed);current_btn.html("<i class='fa fa-spinner fa-pulse' aria-hidden='true'></i>");setTimeout(function(){var post_items="";var enable_button=false;var old_last_key=last_key;last_key=old_last_key+parseInt(getDsmSetting(sk_medium_publication_feed,'post_count'));for(var i=old_last_key;i<last_key;i++){if(typeof data_storage[i]!='undefined'){post_items+="<div class='medium_publication_feed_data'>";post_items+=getFeedItem(data_storage[i],sk_medium_publication_feed,data_link);post_items+="</div>";}}
if(data_storage.length>last_key){enable_button=true;}
sk_medium_publication_feed.find('.grid-medium-publication-feed').append(post_items);current_btn.html("Load more");if(enable_button==false){sk_medium_publication_feed.find('.sk-medium-publication-feed-load-more-posts').hide();}
current_btn.removeAttr('disabled');applyCustomUi(jQuery,sk_medium_publication_feed);applyMasonry();fixMasonry();},500);});if(jQuery('.sk-post-image').length>0){jQuery('.sk-post-image').error(function(){$(this).hide();});}});}}(window,document));